--------------------------------------------------------------------
-- seed.sql – примерни данни за PUDDiT
--------------------------------------------------------------------

USE PUDDiT;
GO

--------------------------------------------------------------------
-- Потребители
--------------------------------------------------------------------
INSERT INTO [User] (Email, PasswordHash, DisplayName, FacultyNumber, Role)
VALUES
(N'student1@uni.bg', N'hash123', N'Иван Петров',   N'123456', N'Student'),
(N'student2@uni.bg', N'hash234', N'Мария Георгиева', N'789012', N'Student'),
(N'teacher@uni.bg',  N'hash345', N'Доц. Киров',     NULL,      N'Teacher');
GO

--------------------------------------------------------------------
-- Канали
--------------------------------------------------------------------
INSERT INTO Channel (Name, Description, IsPrivate, CreatedByUserId)
VALUES
(N'Общи въпроси', N'Общи дискусии за ПУ и ФМИ.', 0, 3),
(N'Помощ по СМА (software-modeling-and-analysis-se)', 
 N'Въпроси по курсовата работа.', 0, 3);
GO

--------------------------------------------------------------------
-- Членство в канали
--------------------------------------------------------------------
INSERT INTO ChannelMember (UserId, ChannelId, MemberRole)
VALUES
(1, 1, N'Member'),
(2, 1, N'Member'),
(3, 1, N'Manager'),
(1, 2, N'Member'),
(2, 2, N'Member'),
(3, 2, N'Manager');
GO

--------------------------------------------------------------------
-- Първоначални постове
--------------------------------------------------------------------
INSERT INTO Post (ChannelId, AuthorUserId, Title, Body, Status)
VALUES
(1, 1,
 N'Кога е следващата лекция?',
 N'Някой знае ли кога е следващата лекция по СМА?',
 N'Active'),
(2, 2,
 N'Въпрос за ER диаграма',
 N'Имам проблем с Chen нотацията, може ли помощ?',
 N'Active');
GO

--------------------------------------------------------------------
-- Първоначални коментари
--------------------------------------------------------------------
INSERT INTO Comment (PostId, AuthorUserId, Body, Status)
VALUES
(1, 3,
 N'Лекцията е в сряда от 10:00.',
 N'Active'),
(2, 3,
 N'Качи скрийншот на диаграмата и ще ти помогнем.',
 N'Active'),
(2, 1,
 N'Ще кача след малко, благодаря!',
 N'Active');
GO

--------------------------------------------------------------------
-- Първоначални гласове за постове
--------------------------------------------------------------------
INSERT INTO PostVote (PostId, VoterUserId, Value)
VALUES
(1, 2,  1),
(1, 3,  1),
(2, 1,  1),
(2, 3, -1);
GO

--------------------------------------------------------------------
-- Първоначални гласове за коментари
--------------------------------------------------------------------
INSERT INTO CommentVote (CommentId, VoterUserId, Value)
VALUES
(1, 1, 1),
(1, 2, 1),
(2, 1, 1),
(3, 2, 1);
GO

--------------------------------------------------------------------
-- Първоначални доклади за постове (trigger-ът ще скрие PostId=1)
--------------------------------------------------------------------
INSERT INTO PostReport (PostId, ReporterUserId, Reason, Status)
VALUES
(1, 2, N'Off-topic',          N'Open'),
(1, 1, N'Spam',               N'Open'),
(1, 3, N'Нарушава правилата', N'Open');
GO

--------------------------------------------------------------------
-- Първоначален доклад за коментар
--------------------------------------------------------------------
INSERT INTO CommentReport (CommentId, ReporterUserId, Reason, Status)
VALUES
(3, 2, N'Неуважителен тон', N'Open');
GO

--------------------------------------------------------------------
-- ДОПЪЛНИТЕЛНИ ДАННИ – още постове, коментари, гласове и доклади
--------------------------------------------------------------------

------------------------
-- Още постове
------------------------
INSERT INTO Post (ChannelId, AuthorUserId, Title, Body, Status)
VALUES
-- PostId = 3 (вероятно)
(1, 2, 
 N'Търся колега за проект по СМА',
 N'Здрасти, търся човек за работа по курсовия проект PUDDiT. Пишете ми, ако искате да работим в екип.',
 N'Active'),

-- PostId = 4
(2, 1,
 N'Може ли ревю на логическия ми модел?',
 N'Качих Crow''s Foot диаграма за PUDDiT. Може ли някой да я погледне за грешки?',
 N'Active'),

-- PostId = 5
(2, 2,
 N'Примерни SQL заявки за изпита',
 N'Споделям няколко SELECT-а с JOIN-ове върху нашата база. Ще допълвам, ако е полезно.',
 N'Active'),

-- PostId = 6
(1, 3,
 N'Правила за поведение в каналите',
 N'Моля, спазвайте добър тон, не спамете и използвайте тагове в заглавията [СМА], [BD], [Прог] и т.н.',
 N'Active');
GO

------------------------
-- Още коментари
------------------------
INSERT INTO Comment (PostId, AuthorUserId, Body, Status)
VALUES
-- Към PostId = 3
(3, 1, 
 N'Аз съм навит, имам част от ER модел, може да комбинираме.',
 N'Active'),

-- Към PostId = 4
(4, 3,
 N'Прати скрийншот + кратко описание на бизнес изискванията.',
 N'Active'),
(4, 2,
 N'Аз също мога да го погледна, вчера правих мой модел.',
 N'Active'),

-- Към PostId = 5
(5, 1,
 N'Супер ще е, ако добавиш и пример за агрегатни функции.',
 N'Active');
GO

------------------------
-- Още гласове за постове
------------------------
INSERT INTO PostVote (PostId, VoterUserId, Value)
VALUES
-- PostId 3
(3, 1,  1),
(3, 3,  1),

-- PostId 4
(4, 2,  1),
(4, 3,  1),

-- PostId 5
(5, 1,  1),
(5, 3, -1),

-- PostId 6
(6, 1,  1),
(6, 2,  1),
(6, 3,  1);
GO

------------------------
-- Още гласове за коментари
-- (Новите CommentId ще са 4,5,6,7 по Identity)
------------------------
INSERT INTO CommentVote (CommentId, VoterUserId, Value)
VALUES
-- CommentId = 4
(4, 2, 1),
(4, 3, 1),

-- CommentId = 5
(5, 1, 1),

-- CommentId = 6
(6, 1, 1),
(6, 3, 1),

-- CommentId = 7
(7, 2, 1);
GO

------------------------
-- Още доклади
------------------------

-- Един пост със спорно съдържание (PostId = 5)
INSERT INTO PostReport (PostId, ReporterUserId, Reason, Status)
VALUES
(5, 3, N'Съдържа грешна информация', N'Open');
GO

-- Един коментар с остър тон (примерно CommentId = 7)
INSERT INTO CommentReport (CommentId, ReporterUserId, Reason, Status)
VALUES
(7, 3, N'Малко агресивен тон, моля проверете.', N'Open');
GO
